<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:LatexMauiApp.ViewModels"
             xmlns:models="clr-namespace:LatexMauiApp.Models"
             xmlns:controls="clr-namespace:LatexMauiApp.Controls"
             x:Class="LatexMauiApp.Views.MainView"
             x:DataType="viewModels:MainViewModel"
             Title="LaTeX Renderer"
             BackgroundColor="{StaticResource Primary}">

    <ScrollView Padding="10">
        <VerticalStackLayout Padding="15" Spacing="25" MaximumWidthRequest="800" HorizontalOptions="Center">
            
            <!-- Header -->
            <Label 
                Text="LaTeX Math Renderer"
                FontSize="32"
                FontAttributes="Bold"
                HorizontalOptions="Center"
                TextColor="White"
                Margin="0,10,0,20" />

            <!-- Custom LaTeX Input Section -->
            <Border 
                BackgroundColor="White"
                Stroke="{StaticResource Primary}"
                StrokeThickness="2"
                Padding="15"
                StrokeShape="RoundRectangle 10">
                
                <VerticalStackLayout Spacing="10">
                    <Label 
                        Text="Enter Custom LaTeX"
                        FontSize="20"
                        FontAttributes="Bold"
                        TextColor="{StaticResource Primary}" />

                    <Entry 
                        Text="{Binding CustomLatex}"
                        Placeholder="e.g., \frac{x^2 + y^2}{z}"
                        FontSize="16"
                        HeightRequest="50"
                        BackgroundColor="{StaticResource Gray100}"
                        Margin="0,5" />

                    <Button 
                        Text="Clear"
                        Command="{Binding ClearCustomLatexCommand}"
                        BackgroundColor="{StaticResource Secondary}"
                        TextColor="White"
                        HeightRequest="50"
                        CornerRadius="8"
                        Margin="0,10" />

                    <!-- Custom Render Result -->


                    <controls:MathView 
                        LaTeX="{Binding CustomLatex}"
                        AutoScale="True"
                        MinimumAutoHeight="80"
                        MaximumAutoHeight="300"
                        AutoScalePadding="15"
                        BackgroundColor="{StaticResource Gray100}"
                        Margin="0,10,0,0" />


                </VerticalStackLayout>
            </Border>

            <!-- Sample Equations Section -->
            <Label 
                Text="Sample Equations"
                FontSize="24"
                FontAttributes="Bold"
                TextColor="White"
                Margin="0,20,0,10" />

            <!-- Sample Equations Collection -->
            <CollectionView 
                ItemsSource="{Binding SampleEquations}"
                SelectionMode="None">
                <CollectionView.ItemsLayout>
                    <LinearItemsLayout 
                        Orientation="Vertical"
                        ItemSpacing="15" />
                </CollectionView.ItemsLayout>

                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:LatexEquation">
                        <Border 
                            BackgroundColor="White"
                            Stroke="{StaticResource Primary}"
                            StrokeThickness="1"
                            Padding="15"
                            StrokeShape="RoundRectangle 8">
                            
                            <VerticalStackLayout Spacing="8">
                                <Label 
                                    Text="{Binding Name}"
                                    FontSize="18"
                                    FontAttributes="Bold"
                                    TextColor="{StaticResource Primary}" />

                                <Label 
                                    Text="{Binding Description}"
                                    FontSize="14"
                                    TextColor="{StaticResource Gray600}" />

                                <Label 
                                    Text="{Binding Expression}"
                                    FontSize="12"
                                    FontFamily="Courier"
                                    TextColor="{StaticResource Gray900}"
                                    BackgroundColor="{StaticResource Gray100}"
                                    Padding="5" />



                                <controls:MathView 
                                    LaTeX="{Binding Expression}"
                                    AutoScale="True"
                                    MinimumAutoHeight="60"
                                    MaximumAutoHeight="200"
                                    AutoScalePadding="10"
                                    BackgroundColor="{StaticResource Gray100}"
                                    Margin="0,5,0,0" />


                            </VerticalStackLayout>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Footer -->
            <Label 
                Text="Built with .NET 9 MAUI, SkiaSharp, and CSharpMath"
                FontSize="12"
                TextColor="White"
                HorizontalOptions="Center"
                Margin="0,20,0,10" />

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
